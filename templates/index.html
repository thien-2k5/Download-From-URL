<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="description" content="Professional Video Downloader with Smart Features">
    <title>üì• Video Downloader Pro - Smart & Fast</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.5/socket.io.min.js"></script>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üì•</text></svg>">
</head>
<body>
    <!-- Theme Toggle -->
    <div class="theme-toggle" onclick="toggleTheme()">
        <span id="themeIcon">üåô</span>
    </div>

    <!-- Navigation Tabs -->
    <div class="nav-tabs">
        <button class="tab-btn active" onclick="switchTab('download')">
            <span class="tab-icon">‚¨áÔ∏è</span>
            <span>Download</span>
        </button>
        <button class="tab-btn" onclick="switchTab('history')">
            <span class="tab-icon">üìã</span>
            <span>History</span>
            <span class="badge" id="historyBadge">0</span>
        </button>
    </div>

    <div class="container">
        <!-- DOWNLOAD TAB -->
        <div id="downloadTab" class="tab-content active">
            <div class="box">
                <div class="header">
                    <h1>üì• Video Downloader Pro</h1>
                    <p class="subtitle">H·ªó tr·ª£: YouTube, Facebook, Instagram, TikTok, Twitter v√† c√°c n·ªÅn t·∫£ng kh√°c</p>
                </div>

                <!-- Quick Actions -->
                <div class="quick-actions">
                    <button class="quick-btn" onclick="pasteFromClipboard()">
                        üìã Paste t·ª´ Clipboard
                    </button>
                    <button class="quick-btn" onclick="clearInput()">
                        üóëÔ∏è X√≥a
                    </button>
                </div>

                <div class="input-group">
                    <input 
                        type="text" 
                        id="url" 
                        placeholder="D√°n link video v√†o ƒë√¢y... (VD: https://youtube.com/watch?v=...)" 
                        autocomplete="off"
                    />
                    <button class="preview-btn" onclick="previewVideo()">
                        üîç Preview
                    </button>
                </div>

                <!-- Video Preview Card -->
                <div id="videoPreview" class="video-preview" style="display: none;">
                    <div class="preview-content">
                        <img id="previewThumbnail" src="" alt="Thumbnail" style="display: none;">
                        <div class="preview-info">
                            <h3 id="previewTitle"></h3>
                            <div class="preview-meta">
                                <span id="previewPlatform"></span>
                                <span id="previewDuration"></span>
                                <span id="previewViews"></span>
                            </div>
                            <div id="previewFormats" class="preview-formats"></div>
                        </div>
                    </div>
                </div>
                
                <div class="format-group">
                    <label for="format">Ch·ªçn ƒë·ªãnh d·∫°ng:</label>
                    <select id="format">
                        <option value="mp4">üé¨ Video MP4</option>
                        <option value="mp3">üéµ Audio MP3 (320kbps)</option>
                        <option value="auto">‚ú® T·ª± ƒë·ªông (t·ªët nh·∫•t)</option>
                    </select>
                </div>

                <div class="quality-group" id="qualityGroup">
                    <label for="quality">Ch·∫•t l∆∞·ª£ng:</label>
                    <select id="quality">
                        <option value="best">‚≠ê T·ªët nh·∫•t</option>
                        <option value="2160p">üî• 4K (2160p)</option>
                        <option value="1440p">üíé 2K (1440p)</option>
                        <option value="1080p">‚ú® Full HD (1080p)</option>
                        <option value="720p">üì∫ HD (720p)</option>
                        <option value="480p">üì± SD (480p)</option>
                    </select>
                </div>

                <button id="downloadBtn" onclick="startDownload()">
                    <span id="btnText">‚¨áÔ∏è T·∫¢I XU·ªêNG</span>
                </button>

                <div class="progress-container" id="progressContainer" style="display: none;">
                    <div class="status-header">
                        <div id="status" class="status-text">ƒêang chu·∫©n b·ªã...</div>
                        <div id="percent" class="percent-text">0%</div>
                    </div>
                    
                    <div class="progress-bar-wrapper">
                        <div id="progressBar" class="progress-bar"></div>
                    </div>
                    
                    <div class="info-row">
                        <div class="info-item">
                            <span class="label">T·ªëc ƒë·ªô:</span>
                            <span id="speed" class="value">--</span>
                        </div>
                        <div class="info-item">
                            <span class="label">ƒê√£ t·∫£i:</span>
                            <span id="downloaded" class="value">--</span>
                        </div>
                        <div class="info-item">
                            <span class="label">T·ªïng:</span>
                            <span id="total" class="value">--</span>
                        </div>
                    </div>
                    
                    <div id="videoTitle" class="video-title"></div>
                </div>

                <div class="instructions">
                    <h3>üìñ H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng:</h3>
                    <ol>
                        <li><strong>D√°n link video:</strong> Copy link t·ª´ YouTube, Facebook, Instagram, TikTok... r·ªìi d√°n v√†o √¥ nh·∫≠p li·ªáu (ho·∫∑c nh·∫•n n√∫t "üìã Paste t·ª´ Clipboard")</li>
                        <li><strong>Xem tr∆∞·ªõc (t√πy ch·ªçn):</strong> Nh·∫•n n√∫t "üîç Preview" ƒë·ªÉ xem th√¥ng tin video tr∆∞·ªõc khi t·∫£i</li>
                        <li><strong>Ch·ªçn ƒë·ªãnh d·∫°ng:</strong> Ch·ªçn MP4 (video), MP3 (ch·ªâ √¢m thanh) ho·∫∑c T·ª± ƒë·ªông</li>
                        <li><strong>Ch·ªçn ch·∫•t l∆∞·ª£ng:</strong> N·∫øu ch·ªçn MP4, b·∫°n c√≥ th·ªÉ ch·ªçn ch·∫•t l∆∞·ª£ng t·ª´ 480p ƒë·∫øn 4K</li>
                        <li><strong>T·∫£i xu·ªëng:</strong> Nh·∫•n n√∫t "‚¨áÔ∏è T·∫¢I XU·ªêNG" v√† ƒë·ª£i qu√° tr√¨nh ho√†n t·∫•t</li>
                        <li><strong>T√¨m file:</strong> Video ƒë√£ t·∫£i s·∫Ω ƒë∆∞·ª£c l∆∞u trong th∆∞ m·ª•c <code>downloads</code></li>
                    </ol>
                    
                    <div class="keyboard-shortcuts">
                        <h4>‚å®Ô∏è Ph√≠m t·∫Øt h·ªØu √≠ch:</h4>
                        <div class="shortcuts-grid">
                            <div><kbd>Ctrl + V</kbd> D√°n URL nhanh</div>
                            <div><kbd>Enter</kbd> B·∫Øt ƒë·∫ßu t·∫£i</div>
                            <div><kbd>Ctrl + K</kbd> X√≥a √¥ nh·∫≠p</div>
                        </div>
                    </div>
                    
                    <div class="tips-section">
                        <h4>üí° M·∫πo s·ª≠ d·ª•ng:</h4>
                        <ul class="tips-list">
                            <li>üåô Nh·∫•n bi·ªÉu t∆∞·ª£ng m·∫∑t trƒÉng ·ªü g√≥c tr√™n ƒë·ªÉ b·∫≠t Dark Mode</li>
                            <li>üìã Xem l·∫°i l·ªãch s·ª≠ t·∫£i xu·ªëng t·∫°i tab "History"</li>
                            <li>üîç S·ª≠ d·ª•ng thanh t√¨m ki·∫øm trong History ƒë·ªÉ t√¨m video c≈©</li>
                            <li>üì§ Export l·ªãch s·ª≠ th√†nh file JSON ƒë·ªÉ backup</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- HISTORY TAB -->
        <div id="historyTab" class="tab-content">
            <div class="box">
                <div class="section-header">
                    <h2>üìã L·ªãch s·ª≠ t·∫£i xu·ªëng</h2>
                    <div class="header-actions">
                        <button class="action-btn export-btn" onclick="exportHistory()">
                            üì§ Export JSON
                        </button>
                        <button class="action-btn clear-btn" onclick="clearHistory()">
                            üóëÔ∏è X√≥a t·∫•t c·∫£
                        </button>
                    </div>
                </div>
                
                <!-- Search Bar -->
                <div class="search-bar">
                    <input 
                        type="text" 
                        id="searchInput" 
                        placeholder="üîç T√¨m ki·∫øm theo t√™n, platform, URL..."
                        oninput="searchHistory(this.value)"
                    />
                </div>

                <!-- Filter Tabs -->
                <div class="filter-tabs">
                    <button class="filter-btn active" onclick="filterHistory('all')">
                        T·∫•t c·∫£
                    </button>
                    <button class="filter-btn" onclick="filterHistory('success')">
                        ‚úÖ Th√†nh c√¥ng
                    </button>
                    <button class="filter-btn" onclick="filterHistory('failed')">
                        ‚ùå Th·∫•t b·∫°i
                    </button>
                    <button class="filter-btn" onclick="filterHistory('mp4')">
                        üé¨ MP4
                    </button>
                    <button class="filter-btn" onclick="filterHistory('mp3')">
                        üéµ MP3
                    </button>
                </div>
                
                <div id="historyList" class="history-list">
                    <div class="loading">ƒêang t·∫£i...</div>
                </div>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='script.js') }}?v=15"></script>
</body>
</html>